{% load i18n %}
{% get_current_language as LANGUAGE_CODE %}
{% load translate_tags %}

<!DOCTYPE html>
<html lang="en" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Education</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.rtl.min.css"
          integrity="sha384-gXt9imSW0VcJVHezoNQsP+TNrjYXoGcrqBZJpry9zJt8PCQjobwmhMGaDHTASo9N" crossorigin="anonymous">
    <!-- Font Awesome -->
    <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
            rel="stylesheet"
    />
    <!-- Google Fonts -->
    <link
            href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
            rel="stylesheet"
    />
    <!-- MDB -->
    <link
            href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/7.3.0/mdb.rtl.min.css"
            rel="stylesheet"
    />
    <style>
        .jumbotron {
            padding: 20px;
            margin-bottom: 20px;
            background-color: #e9ecef;
        }

        .dropdown-menu li {
            position: relative;
        }

        .dropdown-menu .dropdown-submenu {
            display: none;
            position: absolute;
            left: 100%;
            top: -7px;
        }

        .dropdown-menu .dropdown-submenu-left {
            right: 100%;
            left: auto;
        }

        .dropdown-menu > li:hover > .dropdown-submenu {
            display: block;
        }
    </style>

    {% block extra_headers %} {% endblock %}
</head>
<body>
<nav class="container navbar navbar-expand-lg shadow rounded">
    <div class="container-fluid">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" href="{% url 'posts:home:post-list' %}">{% trans "صفحه اصلی" %}</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'subscriptions:package_list' %}">{% trans "بسته های اشتراکی" %}</a>
            </li>
            {#            {% if request.user.is_authenticated %}#}
            {#                <a class="nav-link active" href="{% url 'accounts:user_logout' %}">Logout</a>#}
            {#            {% else %}#}
            {#                <a class="nav-link active" href="{% url 'accounts:user_register' %}">Register</a>#}
            {#                <a class="nav-link active" href="{% url 'accounts:user_login' %}">Login</a>#}
            {#            {% endif %}#}
            {#            <a class="nav-link active" href="{% url 'orders:cart' %}">CART {{ cart|length }}</a>#}
            <!-- Dropdown -->
            <!-- Dropdown -->
            {% if categories %}
                <li class="nav-item dropdown">
                    <a data-mdb-dropdown-init class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLinkRight"
                       role="button"
                       data-mdb-toggle="dropdown" aria-expanded="false">
                        {% trans "دسته بندی" %}
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLinkRight">
                        {% for category in categories %}
                            <li>
                                <a class="dropdown-item" href="{{ category.get_absolute_url }}">
                                    {% translate_field category name %}
                                </a>
                                <ul class="dropdown-menu dropdown-submenu dropdown-submenu-left">
                                    {% with categories1=category.children.all %}
                                        {% for category1 in categories1 %}
                                            <li>
                                                <a class="dropdown-item"
                                                   href="{{ category1.get_absolute_url }}">
                                                    {% translate_field category1 name %}

                                                    &raquo; </a>
                                                <ul class="dropdown-menu dropdown-submenu dropdown-submenu-left">
                                                    {% with categories2=category1.children.all %}
                                                        {% for category2 in categories2 %}
                                                            <li>
                                                                <a class="dropdown-item"
                                                                   href="{{ category2.get_absolute_url }}">
                                                                    {% translate_field category2 name %}
                                                                </a>
                                                            </li>
                                                        {% endfor %}
                                                    {% endwith %}
                                                </ul>
                                            </li>
                                        {% endfor %}
                                    {% endwith %}
                                </ul>
                            </li>
                        {% endfor %}
                    </ul>
                </li>
            {% endif %}
        </ul>
        <div class="navbar-nav">
            {% if request.user.is_authenticated %}

                <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                   aria-expanded="false">{% trans "پروفایل" %}</a>
                <div class="dropdown-menu dropdown-menu-end">
                    <a class="dropdown-item"
                       href="{% url 'accounts:profile:information' %}">{% trans "مشخصات کاربر" %}</a>
                    <a class="dropdown-item"
                       href="{% url 'posts:home:favorite-post' %}">{% trans "پست های مورد علاقه" %}</a>
                    <a class="dropdown-item" href="{% url 'accounts:profile:subscription' %}">{% trans "اشتراک" %}</a>
                    <a class="dropdown-item"
                       href="{% url 'accounts:profile:change-password' %}">{% trans "تغییر رمز" %}</a>
                    <a class="dropdown-item" href="{% url 'accounts:logout' %}">{% trans "خروج" %}</a>
                </div>
            {% else %}
                <a class="nav-link" href="{% url 'accounts:login' %}">ورود</a>
                <a class="nav-link" href="{% url 'accounts:register' %}">ثبت نام</a>
            {% endif %}
        </div>

    </div>
</nav>
<div class="container">
    <div class="mt-4">
        {% if messages %}
            {% for msg in messages %}
                <p class="alert alert-{{ msg.tags }}">{{ msg }}</p>
            {% endfor %}
        {% endif %}
    </div>
    {% block content %} {% endblock content %}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script
            type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/7.3.0/mdb.umd.min.js"
    ></script>

    {% block extra_script %} {% endblock %}
</div>
</body>
</html>